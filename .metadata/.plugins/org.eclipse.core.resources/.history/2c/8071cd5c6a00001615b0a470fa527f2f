package comp417Project;

import java.util.Random;

import burlap.oomdp.core.Domain;
import burlap.oomdp.core.states.State;
import cpw.mods.fml.common.FMLCommonHandler;
import cpw.mods.fml.relauncher.Side;
import cpw.mods.fml.relauncher.SideOnly;
import edu.brown.cs.h2r.burlapcraft.BurlapCraft;
import edu.brown.cs.h2r.burlapcraft.dungeongenerator.Dungeon;
import edu.brown.cs.h2r.burlapcraft.helper.HelperActions;
import edu.brown.cs.h2r.burlapcraft.helper.HelperPos;
import edu.brown.cs.h2r.burlapcraft.stategenerator.StateGenerator;
import net.minecraft.block.Block;
import net.minecraft.client.Minecraft;
import net.minecraft.util.ChatComponentText;
import net.minecraft.world.World;
import net.minecraft.server.*;
import java.util.Random;

public class Bug0 {
	
	public enum Direction { North, East, South, West }
	
    Domain domain;
    State state;
    Dungeon dungeon;
    HelperPos curPos;
    Direction direction;
       
    public Bug0(Domain dom, Dungeon dun){
        domain = dom;
        dungeon = dun;
        state = StateGenerator.getCurrentState(dom, BurlapCraft.currentDungeon);
        curPos = HelperActions.getPlayerPosition();
    }
    
    private Direction getCurrentDirection() {
    	int yaw = Math.abs(HelperActions.getYawDirection());
    	if(yaw >= 0 && yaw < 90) return Direction.South;
    	else if (yaw >= 90 && yaw < 180) return Direction.West;
    	else if (yaw >= 180 && yaw < 270) return Direction.South;
    	else return Direction.East;
	}

	public void printPos(){
        System.out.println("You are at "+ curPos.x + "," + curPos.y + "," + curPos.z);
    }
    
    public void test()
    {
    	HelperActions.moveForward(true);
    	
    	HelperActions.getPlayerPosition();
//    	// Initialize so we know direction
//    	direction = Direction.North;
//    	turnRight();
//    	
//    	try
//    	{
//    		Thread.sleep(1500);
//    		int b = getBlockOnFloor();
//    		System.out.println(b);
//
//    	}catch(Exception e){}
    }
    
    private int getBlockOnFloor(){
    	return HelperActions.getBlockId(pos.x, pos.y-1, pos.z);
    }
    
    private int getBlockAhead(){
    	HelperPos pos = HelperActions.getPlayerPosition();//TODO
    	switch(direction){
    	case North:
    		return HelperActions.getBlockId(pos.x, pos.y, pos.z-1);
    		
    	case East:
    		return HelperActions.getBlockId(pos.x+1, pos.y, pos.z);
    		
    	case South:
    		return HelperActions.getBlockId(pos.x, pos.y, pos.z+1);
    		
    	case West:
    		return HelperActions.getBlockId(pos.x-1, pos.y, pos.z);
    	}
    	return -1;
    }
    
    public void turnRight(){
    	switch(direction){
    	case North:
    		HelperActions.faceEast();
    		direction = Direction.East;
    		break;
    		
    	case East:
    		HelperActions.faceSouth();
    		direction = Direction.South;
    		break;
    		
    	case South:
    		HelperActions.faceWest();
    		direction = Direction.West;
    		break;
    		
    	case West:
    		HelperActions.faceNorth();
    		direction = Direction.North;
    	}
    }
}
